<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Admin – Ebuy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&display=swap" rel="stylesheet" />
  <style>body { font-family: 'DM Sans', sans-serif; }</style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen">
  <div class="fixed inset-0 -z-10 bg-gradient-to-br from-slate-50 via-white to-slate-100"></div>

  <div class="flex min-h-screen">
    <aside id="sidebar" class="w-64 bg-slate-950/95 backdrop-blur text-white flex-shrink-0 flex flex-col max-md:fixed max-md:inset-y-0 max-md:left-0 max-md:z-40 max-md:-translate-x-full max-md:transition-transform">
      <div class="p-5 border-b border-slate-800">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-xl bg-white/10 border border-white/10 flex items-center justify-center font-bold">E</div>
          <div>
            <h1 class="text-lg font-bold tracking-tight leading-tight">Ebuy Admin</h1>
            <p class="text-slate-400 text-xs mt-0.5">Gestion & modération</p>
          </div>
        </div>
      </div>
      <nav class="flex-1 p-3 space-y-0.5">
        <button data-section="dashboard" class="nav-btn w-full text-left px-4 py-2.5 rounded-xl flex items-center gap-3 hover:bg-white/5 transition nav-active">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/5 border border-white/10">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-200" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3h8v10H3z"></path><path d="M13 3h8v6h-8z"></path><path d="M13 11h8v10h-8z"></path><path d="M3 15h8v6H3z"></path></svg>
          </span>
          <span>Tableau de bord</span>
        </button>
        <button data-section="users" class="nav-btn w-full text-left px-4 py-2.5 rounded-xl flex items-center gap-3 hover:bg-white/5 transition">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/5 border border-white/10">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-200" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
          </span>
          <span>Utilisateurs</span>
        </button>
        <button data-section="products" class="nav-btn w-full text-left px-4 py-2.5 rounded-xl flex items-center gap-3 hover:bg-white/5 transition">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/5 border border-white/10">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-200" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"></path><path d="M3.3 7l8.7 5 8.7-5"></path><path d="M12 22V12"></path></svg>
          </span>
          <span>Modération produits</span>
        </button>
        <button data-section="categories" class="nav-btn w-full text-left px-4 py-2.5 rounded-xl flex items-center gap-3 hover:bg-white/5 transition">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/5 border border-white/10">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-200" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6a2 2 0 0 1 2-2h5l2 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
          </span>
          <span>Catégories</span>
        </button>
        <button data-section="content" class="nav-btn w-full text-left px-4 py-2.5 rounded-xl flex items-center gap-3 hover:bg-white/5 transition">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-white/5 border border-white/10">
            <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-200" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v8"></path><path d="M7 20h10"></path><path d="M9 15l3 3 3-3"></path></svg>
          </span>
          <span>Contenus</span>
        </button>
      </nav>
      <div class="p-3 border-t border-slate-800">
        <div class="rounded-xl bg-white/5 p-3 mb-3">
          <p class="text-xs text-slate-400">Connecté en tant que</p>
          <p id="admin-email" class="text-sm font-semibold truncate">—</p>
        </div>
        <button id="btn-logout" class="w-full px-4 py-2 rounded-xl bg-white/10 hover:bg-white/15 text-sm transition">Déconnexion</button>
      </div>
    </aside>

    <main class="flex-1 overflow-auto p-5 md:p-8 max-md:pt-4">
      <div class="sticky top-0 z-30 -mx-5 md:-mx-8 px-5 md:px-8 py-3 bg-white/80 backdrop-blur border-b border-slate-200">
        <div class="flex items-center justify-between gap-3">
          <div class="flex items-center gap-3">
            <button id="btn-sidebar-open" class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-xl border border-slate-200 bg-white hover:bg-slate-50">
              <span class="sr-only">Ouvrir le menu</span>
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-800" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M4 6h16"></path><path d="M4 12h16"></path><path d="M4 18h16"></path></svg>
            </button>
            <div>
              <p class="text-xs text-slate-500">Ebuy</p>
              <p id="page-title" class="text-sm font-semibold text-slate-900">Tableau de bord</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <div class="hidden sm:flex items-center gap-2 px-3 py-2 rounded-xl bg-slate-100 text-slate-600 text-sm">
              <svg viewBox="0 0 24 24" class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M12 1l3 6 6 .9-4.5 4.4 1.1 6.2L12 16.9 6.4 19.5l1.1-6.2L3 7.9 9 7z"></path></svg>
              Accès Admin
            </div>
            <div class="h-10 w-10 rounded-2xl bg-slate-900 text-white flex items-center justify-center font-bold" title="Admin">A</div>
          </div>
        </div>
      </div>
      <div id="sidebar-overlay" class="hidden fixed inset-0 bg-black/40 z-30 md:hidden"></div>

      <section id="section-dashboard" class="admin-section">
        <h2 class="text-2xl font-bold text-slate-900 mb-2">Tableau de bord</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8 mt-6">
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition">
            <div class="flex items-start justify-between gap-3">
              <div>
                <p class="text-slate-500 text-sm font-medium">Utilisateurs</p>
                <p id="stat-users" class="text-2xl font-bold text-slate-900 mt-1">0</p>
              </div>
              <div class="h-10 w-10 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-center">
                <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition">
            <div class="flex items-start justify-between gap-3">
              <div>
                <p class="text-slate-500 text-sm font-medium">Produits</p>
                <p id="stat-products" class="text-2xl font-bold text-slate-900 mt-1">0</p>
              </div>
              <div class="h-10 w-10 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-center">
                <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"></path><path d="M3.3 7l8.7 5 8.7-5"></path><path d="M12 22V12"></path></svg>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition">
            <div class="flex items-start justify-between gap-3">
              <div>
                <p class="text-slate-500 text-sm font-medium">Ventes</p>
                <p id="stat-orders" class="text-2xl font-bold text-slate-900 mt-1">0</p>
              </div>
              <div class="h-10 w-10 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-center">
                <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M9 12h6"></path><path d="M9 16h6"></path><path d="M6 20h12a2 2 0 0 0 2-2V6l-4-4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2z"></path><path d="M14 2v4h4"></path></svg>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition">
            <div class="flex items-start justify-between gap-3">
              <div>
                <p class="text-slate-500 text-sm font-medium">En attente</p>
                <p id="stat-pending" class="text-2xl font-bold text-amber-600 mt-1">0</p>
              </div>
              <div class="h-10 w-10 rounded-2xl bg-slate-50 border border-slate-200 flex items-center justify-center">
                <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M12 8v4l3 3"></path><path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path></svg>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
          <h3 class="font-semibold text-slate-900 mb-4">Résumé des ventes</h3>
          <div id="sales-summary" class="text-slate-600 text-sm">Chargement…</div>
        </div>
        <div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4">
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
            <h3 class="font-semibold text-slate-900 mb-4">Évolution des ventes</h3>
            <canvas id="chart-sales" class="w-full h-56"></canvas>
          </div>
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
            <h3 class="font-semibold text-slate-900 mb-4">Statut des produits</h3>
            <canvas id="chart-products-status" class="w-full h-56"></canvas>
          </div>
        </div>
      </section>

      <section id="section-users" class="admin-section hidden">
        <h2 class="text-2xl font-bold text-slate-900 mb-6">Gestion des utilisateurs</h2>
        <div class="flex flex-wrap gap-2 mb-4">
          <button id="filter-users-all" class="filter-users px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-medium">Tous</button>
          <button id="filter-users-client" class="filter-users px-4 py-2 rounded-lg bg-slate-200 text-slate-700 text-sm font-medium">Clients</button>
          <button id="filter-users-vendeur" class="filter-users px-4 py-2 rounded-lg bg-slate-200 text-slate-700 text-sm font-medium">Vendeurs</button>
        </div>
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full text-left">
              <thead class="bg-slate-50 border-b border-slate-200">
                <tr>
                  <th class="px-4 py-3 text-sm font-semibold text-slate-700">Email / Téléphone</th>
                  <th class="px-4 py-3 text-sm font-semibold text-slate-700">Nom</th>
                  <th class="px-4 py-3 text-sm font-semibold text-slate-700">Rôle</th>
                  <th class="px-4 py-3 text-sm font-semibold text-slate-700">Statut</th>
                  <th class="px-4 py-3 text-sm font-semibold text-slate-700">Actions</th>
                </tr>
              </thead>
              <tbody id="users-tbody" class="divide-y divide-slate-100"></tbody>
            </table>
          </div>
        </div>
        <p id="users-empty" class="hidden mt-4 text-slate-500 text-sm">Aucun utilisateur.</p>
      </section>

      <section id="section-products" class="admin-section hidden">
        <h2 class="text-2xl font-bold text-slate-900 mb-6">Validation et modération des produits</h2>
        <div class="flex flex-wrap gap-2 mb-4">
          <button id="filter-products-all" class="filter-products px-4 py-2 rounded-lg bg-slate-900 text-white text-sm font-medium">Tous</button>
          <button id="filter-products-pending" class="filter-products px-4 py-2 rounded-lg bg-slate-200 text-slate-700 text-sm font-medium">En attente</button>
          <button id="filter-products-approved" class="filter-products px-4 py-2 rounded-lg bg-slate-200 text-slate-700 text-sm font-medium">Approuvés</button>
        </div>
        <div id="products-list" class="space-y-4"></div>
        <p id="products-empty" class="hidden mt-4 text-slate-500 text-sm">Aucun produit.</p>
      </section>

      <section id="section-categories" class="admin-section hidden">
        <h2 class="text-2xl font-bold text-slate-900 mb-6">Gestion des catégories</h2>
        <form id="form-category" class="flex flex-wrap gap-3 mb-6 p-4 bg-white rounded-2xl border border-slate-200">
          <input type="text" id="category-name" placeholder="Nom de la catégorie" class="px-4 py-2 border border-slate-300 rounded-lg flex-1 min-w-[200px]" required />
          <input type="text" id="category-slug" placeholder="Slug (ex: electronique)" class="px-4 py-2 border border-slate-300 rounded-lg w-40" />
          <button type="submit" class="px-4 py-2 bg-slate-900 text-white rounded-lg font-medium">Ajouter</button>
        </form>
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
          <ul id="categories-list" class="divide-y divide-slate-100"></ul>
        </div>
        <p id="categories-empty" class="hidden mt-4 text-slate-500 text-sm">Aucune catégorie.</p>
      </section>

      <section id="section-content" class="admin-section hidden">
        <h2 class="text-2xl font-bold text-slate-900 mb-6">Gestion des contenus</h2>
        <div class="space-y-6">
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
            <h3 class="font-semibold text-slate-900 mb-3">Bannières</h3>
            <form id="form-banner" class="flex flex-wrap gap-3 mb-4">
              <input type="text" id="banner-title" placeholder="Titre de la bannière" class="px-4 py-2 border border-slate-300 rounded-lg flex-1 min-w-[150px]" />
              <input type="text" id="banner-url" placeholder="URL de l'image (ex: assets/slider/slider0.jpg)" class="px-4 py-2 border border-slate-300 rounded-lg flex-1 min-w-[150px]" />
              <input type="text" id="banner-link" placeholder="Lien au clic (optionnel)" class="px-4 py-2 border border-slate-300 rounded-lg w-48" />
              <button type="submit" class="px-4 py-2 bg-slate-900 text-white rounded-lg font-medium">Ajouter la bannière</button>
            </form>
            <ul id="banners-list" class="space-y-2 min-h-[2rem]"></ul>
          </div>
          <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-5">
            <h3 class="font-semibold text-slate-900 mb-3">Mises en avant</h3>
            <form id="form-featured" class="flex flex-wrap gap-3 mb-4">
              <input type="text" id="featured-label" placeholder="Libellé (ex: Tendances)" class="px-4 py-2 border border-slate-300 rounded-lg flex-1 min-w-[150px]" />
              <input type="text" id="featured-id" placeholder="ID produit ou URL" class="px-4 py-2 border border-slate-300 rounded-lg w-48" />
              <button type="submit" class="px-4 py-2 bg-slate-900 text-white rounded-lg font-medium">Ajouter</button>
            </form>
            <ul id="featured-list" class="space-y-2 min-h-[2rem]"></ul>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="ebuy-storage-convention.js"></script>
  <script src="admin-dashboard.js"></script>
</body>
</html>
